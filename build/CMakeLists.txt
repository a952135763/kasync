cmake_minimum_required(VERSION 3.10) 

# set the project name 
project(kasync) 
file(GLOB KASYNC_SOURCE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/../src/*.c)
file(GLOB KASYNC_INCLUDE_FILES ${CMAKE_CURRENT_SOURCE_DIR}/../include/*.h)
message(STATUS "system is ${CMAKE_SYSTEM_NAME}")
#message(STATUS "current source dir is ${CMAKE_CURRENT_SOURCE_DIR}")
#message(STATUS "current binary dir is ${CMAKE_CURRENT_BINARY_DIR}")
if (CMAKE_SYSTEM_NAME MATCHES "Linux") 
    add_definitions(-DLINUX)
elseif (CMAKE_SYSTEM_NAME MATCHES "FreeBSD")
    add_definitions(-DBSD)
endif()
configure_file(${CMAKE_CURRENT_SOURCE_DIR}/../include/kasync_config.h.in ${CMAKE_CURRENT_SOURCE_DIR}/../include/kasync_config.h)
add_library(kasync STATIC ${KASYNC_SOURCE_FILES} ${KASYNC_INCLUDE_FILES})
#add_definitions(-DKSOCKET_SSL)
target_include_directories(kasync PUBLIC ../include)
#target_sources(kasync  ${KASYNC_SOURCE_FILES})